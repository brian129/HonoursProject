<!DOCTYPE html>
<html lang="en">
	<head>
		<% include partials/head %>
	</head>

	<body>
		<% include partials/menu %>
		<section id="productList" class="container mx-auto my-2">
		<div class="card mx-auto">
			<div
				class="card-body d-flex flex-column justify-content-center  align-items-center"
			>
				<div class="card border-primary h-50 mx-auto">
					<div class="card-body">
						<h2><%=user.username%>'s Profile</h2>
				<a href="/logout" class="btn btn-danger btn-sm d-block">Logout</a>
				</div>
				</div>
				
				</br>
				</br>
				
				<!--search box-->
				<div class="col-12 mx-auto">					
					<form action="/profile" method="POST">
						<div class="form-group row">
							<input type="text" name="search" class="form-control mx-2" placeholder="Search here...">
						</div>
						<div class="btn-group d-flex justify-content-center flex-wrap" role="group" aria-label="items filter options">
							<button class="btn btn-outline-dark rounded mx-2" type="submit" name="action" value="product">Search for Product/SubItem</button>
							<button class="btn btn-outline-dark rounded mx-2" type="submit" name="action" value="productAndComment">Search for Product/SubItem and Comment</button>
							<button class="btn btn-light rounded mx-2" type="submit" name="action" value="showAll">Display All Records</button>
						</div>
					</form>
				</div>
				</br>
				</br>
				<h4 class="mr-auto">You have <%= results.length %> product records matching your search</h4>
				<div class="table-responsive mx-auto align-items-center justify-content-center">
					<table class="table table-sm">
						<tbody>
							<tr>
								<th>Product</th>
								<th>Subitem</th>
							</tr>
							<!--Loop to print out everything in the array-->
							<% for(var i=0; i < results.length; i++) { %>
								<% if(results[i].SubItem == null) { %>
								<tr class="table-hover">																
									<td>
										<a href="/product/<%=results[i].Name %>"><b><%= results[i].Name %></b></a>
									</td>
									<td>
										<a href="/product/<%=results[i].Name %>"></a>
									</td>
								</tr>
							<% } else { %>
								<tr class="table-hover">																
										<td>
											<a href="/product/<%=results[i].Name%>/<%= results[i].SubItem %>"><b><%= results[i].Name %></b></a>
										</td>
										<td>
											<a href="/product/<%=results[i].Name%>/<%= results[i].SubItem %>"><%= results[i].SubItem %></a>
										</td>
									</tr>
							<% } %>
							<% } %>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</section>
	</body>
	<% include partials/script %>
</html>